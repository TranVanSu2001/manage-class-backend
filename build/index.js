"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _server = require("@apollo/server");
var _express = require("@apollo/server/express4");
var _drainHttpServer = require("@apollo/server/plugin/drainHttpServer");
var _express2 = _interopRequireDefault(require("express"));
var _http = _interopRequireDefault(require("http"));
var _cors = _interopRequireDefault(require("cors"));
var _bodyParser = _interopRequireDefault(require("body-parser"));
var _resolver = _interopRequireDefault(require("./resolver"));
var _typedef = _interopRequireDefault(require("./typedef"));
const PORT = 4000;
const app = (0, _express2.default)();
const httpServer = _http.default.createServer(app);
(async () => {
  // Set up Apollo Server
  const server = new _server.ApolloServer({
    typeDefs: _typedef.default,
    resolvers: _resolver.default,
    plugins: [(0, _drainHttpServer.ApolloServerPluginDrainHttpServer)({
      httpServer
    })]
  });
  await server.start();
  app.use((0, _cors.default)(), _bodyParser.default.json(), (0, _express.expressMiddleware)(server));
  await new Promise(resolve => httpServer.listen({
    port: PORT
  }, resolve));
  console.log(`ðŸš€ Server ready at http://localhost:${PORT}`);
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQT1JUIiwiYXBwIiwiZXhwcmVzcyIsImh0dHBTZXJ2ZXIiLCJodHRwIiwiY3JlYXRlU2VydmVyIiwic2VydmVyIiwiQXBvbGxvU2VydmVyIiwidHlwZURlZnMiLCJyZXNvbHZlcnMiLCJwbHVnaW5zIiwiQXBvbGxvU2VydmVyUGx1Z2luRHJhaW5IdHRwU2VydmVyIiwic3RhcnQiLCJ1c2UiLCJjb3JzIiwiYm9keVBhcnNlciIsImpzb24iLCJleHByZXNzTWlkZGxld2FyZSIsIlByb21pc2UiLCJyZXNvbHZlIiwibGlzdGVuIiwicG9ydCIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBvbGxvU2VydmVyIH0gZnJvbSBcIkBhcG9sbG8vc2VydmVyXCI7XG5pbXBvcnQgeyBleHByZXNzTWlkZGxld2FyZSB9IGZyb20gXCJAYXBvbGxvL3NlcnZlci9leHByZXNzNFwiO1xuaW1wb3J0IHsgQXBvbGxvU2VydmVyUGx1Z2luRHJhaW5IdHRwU2VydmVyIH0gZnJvbSBcIkBhcG9sbG8vc2VydmVyL3BsdWdpbi9kcmFpbkh0dHBTZXJ2ZXJcIjtcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgaHR0cCBmcm9tIFwiaHR0cFwiO1xuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gXCJib2R5LXBhcnNlclwiO1xuaW1wb3J0IHJlc29sdmVycyBmcm9tIFwiQC9yZXNvbHZlclwiO1xuaW1wb3J0IHR5cGVEZWZzIGZyb20gXCJAL3R5cGVkZWZcIjtcblxuY29uc3QgUE9SVCA9IDQwMDA7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbmNvbnN0IGh0dHBTZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApO1xuXG4oYXN5bmMgKCkgPT4ge1xuICAvLyBTZXQgdXAgQXBvbGxvIFNlcnZlclxuICBjb25zdCBzZXJ2ZXIgPSBuZXcgQXBvbGxvU2VydmVyKHtcbiAgICB0eXBlRGVmcyxcbiAgICByZXNvbHZlcnMsXG4gICAgcGx1Z2luczogW0Fwb2xsb1NlcnZlclBsdWdpbkRyYWluSHR0cFNlcnZlcih7IGh0dHBTZXJ2ZXIgfSldLFxuICB9KTtcbiAgYXdhaXQgc2VydmVyLnN0YXJ0KCk7XG5cbiAgYXBwLnVzZShjb3JzKCksIGJvZHlQYXJzZXIuanNvbigpLCBleHByZXNzTWlkZGxld2FyZShzZXJ2ZXIpKTtcblxuICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZTogYW55KSA9PlxuICAgIGh0dHBTZXJ2ZXIubGlzdGVuKHsgcG9ydDogUE9SVCB9LCByZXNvbHZlKVxuICApO1xuICBjb25zb2xlLmxvZyhg8J+agCBTZXJ2ZXIgcmVhZHkgYXQgaHR0cDovL2xvY2FsaG9zdDoke1BPUlR9YCk7XG59KSgpO1xuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxNQUFNQSxJQUFJLEdBQUcsSUFBSTtBQUVqQixNQUFNQyxHQUFHLEdBQUcsSUFBQUMsaUJBQU8sR0FBRTtBQUNyQixNQUFNQyxVQUFVLEdBQUdDLGFBQUksQ0FBQ0MsWUFBWSxDQUFDSixHQUFHLENBQUM7QUFFekMsQ0FBQyxZQUFZO0VBQ1g7RUFDQSxNQUFNSyxNQUFNLEdBQUcsSUFBSUMsb0JBQVksQ0FBQztJQUM5QkMsUUFBUSxFQUFSQSxnQkFBUTtJQUNSQyxTQUFTLEVBQVRBLGlCQUFTO0lBQ1RDLE9BQU8sRUFBRSxDQUFDLElBQUFDLGtEQUFpQyxFQUFDO01BQUVSO0lBQVcsQ0FBQyxDQUFDO0VBQzdELENBQUMsQ0FBQztFQUNGLE1BQU1HLE1BQU0sQ0FBQ00sS0FBSyxFQUFFO0VBRXBCWCxHQUFHLENBQUNZLEdBQUcsQ0FBQyxJQUFBQyxhQUFJLEdBQUUsRUFBRUMsbUJBQVUsQ0FBQ0MsSUFBSSxFQUFFLEVBQUUsSUFBQUMsMEJBQWlCLEVBQUNYLE1BQU0sQ0FBQyxDQUFDO0VBRTdELE1BQU0sSUFBSVksT0FBTyxDQUFFQyxPQUFZLElBQzdCaEIsVUFBVSxDQUFDaUIsTUFBTSxDQUFDO0lBQUVDLElBQUksRUFBRXJCO0VBQUssQ0FBQyxFQUFFbUIsT0FBTyxDQUFDLENBQzNDO0VBQ0RHLE9BQU8sQ0FBQ0MsR0FBRyxDQUFFLHVDQUFzQ3ZCLElBQUssRUFBQyxDQUFDO0FBQzVELENBQUMsR0FBRyJ9